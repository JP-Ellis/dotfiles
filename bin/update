#!/usr/bin/zsh

printf "$(tput bold)==> Checking TeXLive updates...$(tput sgr0)\n"
printf "$(tput bold)===============================$(tput sgr0)\n"
sudo tlmgr update --self --all

printf "$(tput bold)==> Checking Arch Linux updates...$(tput sgr0)\n"
printf "$(tput bold)==================================$(tput sgr0)\n"
yay -Syu --noconfirm --devel

printf "$(tput bold)==> Checking ycmd updates...$(tput sgr0)\n"
printf "$(tput bold)============================$(tput sgr0)\n"
cd ~/src/tools/ycmd
git fetch
if [[ $(git rev-parse HEAD) != $(git rev-parse @\{u\}) ]]; then
    git pull
    git submodule update --init --recursive
    ./build.py --all --system-libclang --system-boost
fi
cd ~

printf "$(tput bold)==> Checking Rustup updates...$(tput sgr0)\n"
printf "$(tput bold)==============================$(tput sgr0)\n"
rustup update

printf "$(tput bold)==> Checking Cargo updates...$(tput sgr0)\n"
printf "$(tput bold)=============================$(tput sgr0)\n"
cargo install-update -a
